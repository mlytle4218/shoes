/*! Mon Oct 01 2018 12:53:59 */

var container,controls,model,fileName,fileExt,path,camera,scene,renderer,light,light3,raycaster,mouse,plane,print,sphereGeometry,planeGeometry,shadowPrint,objFile,mtlFile,gltfFile,rotationDone=!1,keepAnimating=!0,floatProgress=0,skyColor=16777215,groundColor=16777215,connectingElement="product-canvas",cameraDistance=500;function loadModelOntoPage(e){shadowPrint=e.shadow,gltfFile=e.gltf,init(),animate()}function init(){container=document.getElementById(connectingElement),document.body.appendChild(container),(camera=new THREE.PerspectiveCamera(45,container.clientWidth/container.clientHeight,1,50)).position.set(0,0,cameraDistance),scene=new THREE.Scene;var e=new THREE.Color(14540253);scene.background=e,(light=new THREE.AmbientLight(skyColor)).position.set(0,10,0),scene.add(light);var o=new THREE.GLTFLoader,n=console.log;o.load(gltfFile,function(e){(model=e.scene).rotation.y=-Math.PI/2,scene.add(model),scene.add(print),modelLoaded=!0,setTimeout(function(){rotateOnce(model)},100)},n,function(e){console.error(e)});var t=new THREE.TextureLoader,r=new THREE.MeshLambertMaterial({map:t.load(shadowPrint)});r.transparent=!0;var i=new THREE.PlaneGeometry(10,20);(print=new THREE.Mesh(i,r)).position.set(0,-2,0),print.rotation.x=Math.PI/2*3,print.rotation.z=Math.PI/2,raycaster=new THREE.Raycaster,mouse=new THREE.Vector2,(controls=new THREE.OrbitControls(camera,document.getElementById(connectingElement))).target.set(0,5,0),controls.maxDistance=40,controls.minDistance=10,controls.update(),this.renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(container.clientWidth,container.clientHeight),renderer.gammaOutput=!0,container.appendChild(renderer.domElement)}function onWindowResize(){camera.aspect=container.clientWidth/container.clientHeight,camera.updateProjectionMatrix(),renderer.setSize(container.clientWidth,container.clientHeight)}function animate(){requestAnimationFrame(animate),rotationDone&keepAnimating&&float(),renderer.render(scene,camera)}function onMouseDown(e){rotationDone&&(keepAnimating=!1,model.position.x=0,model.position.y=0,model.position.z=0,scene.remove(print));var o=container.offsetLeft+container.clientWidth;e.clientX>container.offsetLeft&e.clientX<o&&(mouse.x=(e.clientX-container.offsetLeft)/container.clientWidth,console.log(mouse.x));var n=container.offsetTop+container.clientHeight;e.clientY>container.offsetTop&e.clientY<n&&(mouse.y=(container.clientHeight-(e.clientY-container.offsetTop))/container.clientHeight,console.log(mouse.y)),raycaster.setFromCamera(mouse,camera);for(var t=raycaster.intersectObjects(scene.children,!0),r=0;r<t.length;r++)console.log(t[r]);e.preventDefault()}function loadMaterials(t,r){return new Promise(function(e,o){var n=new THREE.MTLLoader;n.setPath(t),n.load(r+".mtl",e,void 0,o)})}function loadDRACOModelOnly(n,t){return new Promise(function(e,o){THREE.DRACOLoader.setDecoderPath("js/"),THREE.DRACOLoader.setDecoderConfig({type:"js"}),(new THREE.DRACOLoader).load(n+t+".drc",e,void 0,o)})}function loadObjModel(r,i){var a;return new Promise(function(n,t){var e=new THREE.MTLLoader;e.setPath(r),e.load(i+".mtl",function(e){e.preload();var o=new THREE.OBJLoader;o.setMaterials(e),o.setPath(r),o.load(i+".obj",n,a,t)},a,t)})}function loadObjectModel(r,e){var i;return console.log(r),console.log(e),new Promise(function(n,t){(new THREE.MTLLoader).load(e,function(e){e.preload();var o=new THREE.OBJLoader;o.setMaterials(e),o.load(r,n,i,t)},i,t)})}function loadDRACOModel(t,r){console.log("in load DRACO model");var i=console.log,a=console.log;return new Promise(function(o,n){var e=new THREE.MTLLoader;e.setPath(t),e.load(r+".mtl",function(e){e.preload(),THREE.DRACOLoader.setDecoderPath("js/"),THREE.DRACOLoader.setDecoderConfig({type:"js"}),(new THREE.DRACOLoader).load(t+r+".drc",o,a,n)},i,n)})}function loadGltfModel(n){var t=console.log;return new Promise(function(e,o){(new THREE.GLTFLoader).load(n,e,t,o)})}function causeHop(){littleHop(model)}function rotateOnce(e){rotationDone=!1;var o=setInterval(function(){125<=n?(clearInterval(o),rotationDone=!0):(n++,e.rotation.y+=.05,print.rotation.z+=.05)},10),n=0}function float(){160<=floatProgress?floatProgress=0:floatProgress<40?(floatProgress++,model.position.y+=.005):floatProgress<80?(floatProgress++,model.position.y-=.005):floatProgress<120?(floatProgress++,model.position.y-=.005):floatProgress<160&&(floatProgress++,model.position.y+=.005)}function littleHop(e){var o=setInterval(function(){80<=n?clearInterval(o):n<10?(n++,e.position.y+=.1,e.rotation.y-=.01):n<20?(n++,e.position.y+=.1,e.rotation.y+=.01):n<30?(n++,e.position.y-=.1,e.rotation.y+=.01):n<40?(n++,e.position.y-=.1,e.rotation.y-=.01):n<50?(n++,e.position.y+=.1,e.rotation.y-=.01):n<60?(n++,e.position.y+=.1,e.rotation.y+=.01):n<70?(n++,e.position.y-=.1,e.rotation.y+=.01):n<80&&(n++,e.position.y-=.1,e.rotation.y-=.01)},10),n=0}window.addEventListener("resize",onWindowResize,!1),window.addEventListener("mousedown",onMouseDown,!1);