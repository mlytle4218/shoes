/*! Mon Oct 01 2018 13:10:29 */

var container,controls,model,fileName,fileExt,path,camera,scene,renderer,light,light3,raycaster,mouse,plane,print,shadowPrint,gltfFile,rotationDone=!1,keepAnimating=!0,floatProgress=0,skyColor=16777215,connectingElement="product-canvas",cameraDistance=500;function loadModelOntoPage(e){shadowPrint=e.shadow,gltfFile=e.gltf,init(),animate()}function init(){container=document.getElementById(connectingElement),(camera=new THREE.PerspectiveCamera(45,container.clientWidth/container.clientHeight,1,50)).position.set(0,0,cameraDistance),scene=new THREE.Scene;var e=new THREE.Color(14540253);scene.background=e,(light=new THREE.AmbientLight(skyColor)).position.set(0,10,0),scene.add(light),(new THREE.GLTFLoader).load(gltfFile,function(e){(model=e.scene).rotation.y=-Math.PI/2,scene.add(model),scene.add(print),modelLoaded=!0,setTimeout(function(){rotateOnce(model)},100)},void 0,function(e){console.error(e)});var n=new THREE.TextureLoader,t=new THREE.MeshLambertMaterial({map:n.load(shadowPrint)});t.transparent=!0;var o=new THREE.PlaneGeometry(10,20);(print=new THREE.Mesh(o,t)).position.set(0,-2,0),print.rotation.x=Math.PI/2*3,print.rotation.z=Math.PI/2,raycaster=new THREE.Raycaster,mouse=new THREE.Vector2,(controls=new THREE.OrbitControls(camera,document.getElementById(connectingElement))).target.set(0,5,0),controls.maxDistance=40,controls.minDistance=10,controls.update(),this.renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(container.clientWidth,container.clientHeight),renderer.gammaOutput=!0,container.appendChild(renderer.domElement)}function onWindowResize(){camera.aspect=container.clientWidth/container.clientHeight,camera.updateProjectionMatrix(),renderer.setSize(container.clientWidth,container.clientHeight)}function animate(){requestAnimationFrame(animate),rotationDone&keepAnimating&&float(),renderer.render(scene,camera)}function onMouseDown(e){rotationDone&&(keepAnimating=!1,model.position.x=0,model.position.y=0,model.position.z=0,scene.remove(print));var n=container.offsetLeft+container.clientWidth;e.clientX>container.offsetLeft&e.clientX<n&&(mouse.x=(e.clientX-container.offsetLeft)/container.clientWidth,console.log(mouse.x));var t=container.offsetTop+container.clientHeight;e.clientY>container.offsetTop&e.clientY<t&&(mouse.y=(container.clientHeight-(e.clientY-container.offsetTop))/container.clientHeight,console.log(mouse.y)),raycaster.setFromCamera(mouse,camera);for(var o=raycaster.intersectObjects(scene.children,!0),i=0;i<o.length;i++)console.log(o[i]);e.preventDefault()}function rotateOnce(e){rotationDone=!1;var n=setInterval(function(){125<=t?(clearInterval(n),rotationDone=!0):(t++,e.rotation.y+=.05,print.rotation.z+=.05)},10),t=0}function float(){160<=floatProgress?floatProgress=0:floatProgress<40?(floatProgress++,model.position.y+=.005):floatProgress<80?(floatProgress++,model.position.y-=.005):floatProgress<120?(floatProgress++,model.position.y-=.005):floatProgress<160&&(floatProgress++,model.position.y+=.005)}window.addEventListener("resize",onWindowResize,!1),window.addEventListener("mousedown",onMouseDown,!1);